---
// TODO the posts loop should be a vue component
// pages are only connecting the data layer using functions in util to pass them on to the components handling the ui
// okay and maybe they do the routing, but no logic, no styling
import DefaultLayout from '../../layouts/DefaultLayout.astro';
import PostsList from '../../components/Posts/PostsList.astro';
import PostsCategories from '../../components/Posts/PostsCategories.astro';
import type { Post } from '../../types/post';
import { getCategories } from '../../util/api/categories';

const title = 'Posts';
const description = 'TBD';
const permalink = 'TBD';
const socialImg = 'TBD';
const socialImgAlt = 'TBD';

const posts: Post[] = await Astro.glob('../../content/posts/*.md');
const categories = await getCategories(posts);
---

<DefaultLayout
	title={title}
	description={description}
	permalink={permalink}
	socialImg={socialImg}
	socialImgAlt={socialImgAlt}
>
	<section>
		<h1>Posts</h1>
		<!-- TODO make it dynamic again at one point -->
		<PostsCategories categories={categories} />
		<PostsList posts={posts} />
		<!-- TODO adapt urls -->
		<p>
			Check out the <a href="globals.blogFeedURL">RSS feed</a> or
			<a href="globals.twitterURL">my Twitter account</a>
			to keep up to date.
		</p>
	</section>
</DefaultLayout>
