---
// TODO the posts loop should be a vue component
// pages are only connecting the data layer using functions in util to pass them on to the components handling the ui
// okay and maybe they do the routing, but no logic, no styling
import DefaultLayout from '../../layouts/DefaultLayout.astro';
import PostsList from '../../components/Posts/PostsList.svelte';
import { getCategories } from '../../util/data/categories';
import { rawToPosts } from '../../util/data/posts';
import BaseFootnote from '../../components/Base/BaseFootnote.astro';

const title = 'Posts';
const description = 'TBD';
const permalink = 'TBD';
const socialImg = 'TBD';
const socialImgAlt = 'TBD';

const rawPosts = await Astro.glob('../../content/posts/*.md');
const posts = rawToPosts(rawPosts);
const categories = getCategories(posts);
---

<DefaultLayout
	title={title}
	description={description}
	permalink={permalink}
	socialImg={socialImg}
	socialImgAlt={socialImgAlt}
>
	<PostsList client:load posts={posts} categories={categories} />
	<BaseFootnote>
		<!-- TODO adapt urls -->
		Check out the <a href="globals.blogFeedURL">RSS feed</a> or
		<a href="globals.twitterURL">my Twitter account</a>
		to keep up to date.
	</BaseFootnote>
</DefaultLayout>
