---
import BaseFootnote from '../../components/Base/BaseFootnote.astro';
import type { Post } from '../../types/post';
import type { Category } from '../../types/category';
import { getCategories } from '../../util/data/categories';
import DefaultLayout from '../../layouts/DefaultLayout.astro';
import { rawToPosts } from '../../util/data/posts';

const rawPosts = await Astro.glob('../../content/posts/*.md');
const posts = rawToPosts(rawPosts);
const categories = await getCategories(posts);

const title = 'Categories';
const description = 'TBD';
const permalink = 'TBD';
const socialImg = 'TBD';
const socialImgAlt = 'TBD';
---

<DefaultLayout
	title={title}
	description={description}
	permalink={permalink}
	socialImg={socialImg}
	socialImgAlt={socialImgAlt}
>
	<section>
		<h2>Categories</h2>
		<ul>
			{
				categories.map((category: Category) => {
					return (
						<li class="h-feed">
							<a href={category.fullPath}>
								<h2 class="title p-name">{category.display}</h2>
							</a>
						</li>
					);
				})
			}
		</ul>
		<BaseFootnote>
			Check out the <a href="https://harambasic.de/posts/rss.xml">RSS feed</a> or
			<a href="TBD">my Mastodon account</a> to keep up to date.
		</BaseFootnote>
	</section>
</DefaultLayout>
